<div class="edit-container">
  <h2 class="edit-title">Editar Producto</h2>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="nombre" class="form-label">Nombre de producto</label>
      <input type="text" id="nombre" formControlName="nombre" class="form-control">
      <div *ngIf="editForm.get('nombre')?.invalid && editForm.get('nombre')?.touched" class="error-text">
        El nombre es obligatorio y debe tener entre 3 y 100 caracteres
      </div>
    </div>

    <div class="form-group">
      <label for="precio" class="form-label">Precio</label>
      <input type="number" id="precio" formControlName="precio" class="form-control">
      <div *ngIf="editForm.get('precio')?.invalid && editForm.get('precio')?.touched" class="error-text">
        El precio es obligatorio y debe ser un número válido
      </div>
    </div>

    <div class="form-group">
      <label for="descripcion" class="form-label">Descripción</label>
      <textarea id="descripcion" formControlName="descripcion" rows="3" class="form-control form-textarea"></textarea>
      <div *ngIf="editForm.get('descripcion')?.invalid && editForm.get('descripcion')?.touched" class="error-text">
        La descripción es obligatoria
      </div>
    </div>

    <div class="form-group">
      <label for="tipoProducto" class="form-label">Tipo de producto</label>
      <select id="tipoProducto" formControlName="tipoProducto" class="form-select">
        <option value="zapato">Zapato</option>
        <option value="Ropa">Ropa</option>
        <option value="Hogar">Hogar</option>
        <option value="Alimentos">Alimentos</option>
        <option value="Otros">Otros</option>
      </select>
    </div>

    <div class="form-checkbox">
      <input type="checkbox" id="productoOferta" formControlName="productoOferta">
      <label for="productoOferta" class="form-label">En oferta</label>
    </div>

    <div class="form-group">
      <label for="img" class="form-label">Imagen de producto</label>
      <input type="file" id="img" (change)="onFileChange($event)" class="form-control form-file" accept="image/*">
      
      <!-- Vista previa de la imagen -->
      <div *ngIf="previewUrl" class="image-preview">
        <img [src]="previewUrl" alt="Vista previa">
      </div>
    </div>
    
    <div class="button-group">
      <button type="button" class="cancel-button" (click)="onCancel()">
        Cancelar
      </button>
      <button type="submit" [disabled]="editForm.invalid || isSubmitting" class="save-button">
        <span *ngIf="!isSubmitting">Guardar Cambios</span>
        <span *ngIf="isSubmitting">Procesando...</span>
      </button>
    </div>
  </form>
</div>

